(function(e){e.fn.jekyllSearch=function(t){function u(){i.keyup(function(t){t.which===13&&o&&(window.location=o[0].url),e(this).val().length?f(a(e(this).val())):l()})}function a(e){o=[];for(var t=0;t<r.length;t++){var n=r[t];for(key in n)if(n.hasOwnProperty(key))if(n[key]instanceof Array){var i=!1;for(var s=0;s<n[key].length;s++)if(n[key][s].toLowerCase().indexOf(e.toLowerCase())>=0){o.push(n);break}}else if(n[key].toLowerCase().indexOf(e.toLowerCase())>=0){o.push(n);break}}return o}function f(t){l(),s.append(e(n.searchResultsTitle));if(t&&t.length)for(var r=0;r<t.length&&r<n.limit;r++){var i=t[r];output=n.template,output=output.replace(/\{(.*?)\}/g,function(e,t){return i[t]}),s.append(e(output))}else s.append(n.noResults)}function l(){s.children().remove()}var n=e.extend({jsonFile:"/search.json",template:'<a href="{url}" title="{desc}">{title}</a>',searchResults:".results",searchResultsTitle:"<h4>Search results</h4>",limit:"10",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"},t),r=[],i=this,s=e(n.searchResults),o=[];n.jsonFile.length&&s.length&&e.ajax({type:"GET",url:n.jsonFile,dataType:"json",success:function(e,t,n){r=e,u()},error:function(e,t,n){console.log("***ERROR in jekyllSearch.js***"),console.log(e),console.log(t),console.log(n)}})}})(jQuery)